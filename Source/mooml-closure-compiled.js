Mooml={templates:{},engine:{nodeStack:[]},globalized:false,tags:["a","abbr","address","area","article","aside","audio","b","base","bdo","blockquote","body","br","button","canvas","caption","cite","col","colgroup","command","datalist","dd","del","details","dialog","dfn","div","dl","dt","em","embed","fieldset","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","keygen","kbd","label","legend","li","link","map","mark","menu","meta",
"meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","samp","script","section","select","small","source","span","strong","style","sub","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","ul","var","video","acronym","applet","basefont","big","center","dir","font","frame","frameset","noframes","s","strike","tt","u","xmp"],register:function(d,b){this.templates[d]=function(a){return this.evaluate(b,a)}.bind(this)},
render:function(d,b){return this.templates[d](b)},evaluate:function(d,b){var a=[],c=[];this.engine.nodeStack.push(c);$splat(b||{}).each(function(){with(this.engine)eval("("+d+")(params, index)");a.extend(new Elements(c.filter(function(e){return e.getParent()===null})));c.empty()}.bind(this));this.engine.nodeStack.pop();return a.length>1?a:a.shift()},initEngine:function(){this.tags.each(function(d){(this.globalized?window:this.engine)[d]=function(){var b=Mooml.globalized?null:this.nodeStack.getLast(),
a=new Element(d);$each(arguments,function(c,e){switch($type(c)){case "array":case "element":case "collection":a.adopt(c);break;case "string":!Mooml.globalized&&b&&a.getChildren().each(function(f){b.erase(f)});a.set("html",a.get("html")+c);break;case "number":a.appendText(c.toString());break;case "object":e==0&&a.set(c);break}});!Mooml.globalized&&b&&b.push(a);return a}}.bind(this))},globalize:function(){this.globalized=true;this.initEngine()}};Mooml.initEngine();